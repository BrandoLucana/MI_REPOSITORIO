<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Panel de Entrenadores - Pasión por el Voley</title>
    <link rel="icon" href="../static/img/PASION POR EL VOLEY.jpg" type="image/jpeg"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/output.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/contactanos.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/loader.css') }}" />
  </head>
  <body class="bg-white text-gray-800">
<body class="bg-white text-gray-800">
    <div id="loader" class="loader">
        <div class="mover"></div>
    </div>

    <header class="text-white">
        <div class="container mx-auto p-4 flex items-center justify-between">
            <div class="flex items-center">
                <a href="/">
                    <div class="flex items-center">
                        <img src="../static/img/PASION POR EL VOLEY.jpg" alt="Logo" class="h-16 w-auto mr-4">
                        <h1 class="text-xl font-bold">PASIÓN POR EL VOLEY</h1>
                    </div>
                </a>
            </div>
            <nav class="hidden md:block">
                <ul class="flex space-x-4 font-bold">
                <li><a href="/" class="relative pb-1 hover:text-gray-300 hover:border-b-2 hover:border-white transition-all duration-200">Inicio</a></li>
                <li><a href="/inscripciones" class="relative pb-1 hover:text-gray-300 hover:border-b-2 hover:border-white transition-all duration-200">Inscripciones</a></li>
                <li><a href="/nosotros" class="relative pb-1 hover:text-gray-300 hover:border-b-2 hover:border-white transition-all duration-200">Nosotros</a></li>
                <li><a href="/horarios" class="relative pb-1 hover:text-gray-300 hover:border-b-2 hover:border-white transition-all duration-200">Horarios</a></li>
                <li><a href="/contactanos" class="relative pb-1 hover:text-gray-300 hover:border-b-2 hover:border-white transition-all duration-200">Contáctanos</a></li>
                <li class="relative group"><a href="/mas" class="relative pb-1 hover:text-gray-300 hover:border-b-2 hover:border-white transition-all duration-200">Más ▾</a>
                <div class="absolute hidden group-hover:block bg-white shadow-md rounded mt-2 w-48 text-gray-800 z-50">
                    <a href="/torneos" class="block px-4 py-2 hover:bg-gray-100">Torneos</a>
                    <a href="/productos" class="block px-4 py-2 hover:bg-gray-100">Productos</a>
                    <a href="/galeria" class="block px-4 py-2 hover:bg-gray-100">Galería</a>
                    <a href="/eventos" class="block px-4 py-2 hover:bg-gray-100">Eventos</a>
                    <a href="/noticias" class="block px-4 py-2 hover:bg-gray-100">Noticias</a>
                    <a href="/donde_estamos" class="block px-4 py-2 hover:bg-gray-100">Dónde Estamos</a>
                </div>
                </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- panel-entrenadores.html -->
<div class="min-h-screen bg-gray-100 flex">
  <!-- Sidebar -->
  <aside class="w-64 bg-red-800 text-white p-6 space-y-4">
    <h2 class="text-2xl font-bold">Panel Entrenador</h2>
    <nav class="space-y-2">
      <a href="#seccion-alumnos" class="block hover:bg-red-700 p-2 rounded">Alumnos</a>
      <a href="#seccion-torneos" class="block hover:bg-red-700 p-2 rounded">Torneos</a>
      <a href="#seccion-estadisticas" class="block hover:bg-red-700 p-2 rounded">Estadísticas</a>
    </nav>
  </aside>

  <!-- Contenido -->
  <main class="flex-1 p-8">
    <section id="seccion-alumnos" class="mb-10">
      <h3 class="text-xl font-bold mb-3">Registros de Alumnos</h3>
      <!-- Tabla, filtros, etc -->
    </section>

    <section id="seccion-torneos" class="mb-10">
      <h3 class="text-xl font-bold mb-3">Registros de Torneos</h3>
      <!-- Tabla, CRUD de torneos -->
        <div class="registro-torneo-container">
          <h1>Podrá registrar y visualizar todos los torneos manejados este 2025.</h1>
          <!-- Formulario que envía datos al backend -->
          <form id="formTorneo" method="POST" action="{{ url_for('registro_torneo') }}" autocomplete="off" class="bg-white p-6 rounded-lg shadow-lg space-y-4">
          <div>
            <label for="nombre" class="block text-gray-700 font-semibold">Nombre del Torneo</label>
            <input type="text" id="nombre" name="nombre" required placeholder="Ingrese el nombre"
              class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-500" />
          </div>

          <div>
            <label for="fecha" class="block text-gray-700 font-semibold">Fecha</label>
            <input type="date" id="fecha" name="fecha" required
              class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-500" />
          </div>

          <div>
            <label for="lugar" class="block text-gray-700 font-semibold">Lugar</label>
            <input type="text" id="lugar" name="lugar" required placeholder="Ingrese el lugar"
              class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-500" />
          </div>

          <div>
            <label for="nivel" class="block text-gray-700 font-semibold">Nivel</label>
            <select id="nivel" name="nivel" required
              class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-500">
              <option value="">-- Seleccione un nivel --</option>
              <option value="Aficionado">Aficionado</option>
              <option value="Intermedio">Intermedio</option>
              <option value="Avanzado">Avanzado</option>
            </select>
          </div>

          <div>
            <label for="descripcion" class="block text-gray-700 font-semibold">Descripción</label>
            <textarea id="descripcion" name="descripcion" rows="3" placeholder="Descripción del torneo"
              class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-500"></textarea>
          </div>

          <div>
            <label for="estado" class="block text-gray-700 font-semibold">Estado</label>
            <select id="estado" name="estado" required
              class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-500">
              <option value="">-- Seleccione un estado --</option>
              <option value="Pendiente">Pendiente</option>
              <option value="En Curso">En Curso</option>
              <option value="Finalizado">Finalizado</option>
            </select>
          </div>

          <!-- Botones -->
          <div class="flex flex-wrap gap-4 mt-6">
            <button type="submit" class="bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700 transition">
              Registrar
            </button>
            <button type="button" class="bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 transition">
              Modificar
            </button>
            <button type="button" class="bg-red-500 text-white px-6 py-2 rounded hover:bg-red-600 transition">
              Eliminar
            </button>
            <button type="reset" class="bg-green-400 text-white px-6 py-2 rounded hover:bg-green-500 transition">
              Limpiar
            </button>
          </div>
        </form>

          <h2 style="margin-top: 40px; color: #b30000;">Torneos Registrados</h2>
          <table id="tablaTorneos" style="width: 100%; border-collapse: collapse; margin-top: 10px;">
            <thead>
              <tr style="background-color: #b30000; color: white;">
                <th style="padding: 10px; border: 1px solid #ddd;">Nombre</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Fecha</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Lugar</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Nivel</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Descripción</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Estado</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Acciones</th>
              </tr>
            </thead>
            <tbody>
              {% for torneo in torneos %}
              <tr>
                <td style="padding: 8px; border: 1px solid #ddd;">{{ torneo.nombre }}</td>
                <td style="padding: 8px; border: 1px solid #ddd;">{{ torneo.fecha }}</td>
                <td style="padding: 8px; border: 1px solid #ddd;">{{ torneo.lugar }}</td>
                <td style="padding: 8px; border: 1px solid #ddd;">{{ torneo.nivel }}</td>
                <td style="padding: 8px; border: 1px solid #ddd;">{{ torneo.descripcion }}</td>
                <td style="padding: 8px; border: 1px solid #ddd;">{{ torneo.estado }}</td>
                <td style="padding: 8px; border: 1px solid #ddd;">
                  <button class="btn-modificar" style="margin-right: 5px; background-color: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">Modificar</button>
                  <button class="btn-eliminar" style="background-color: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">Eliminar</button>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        <script>
          const form = document.getElementById('formTorneo');
          const tablaBody = document.querySelector('#tablaTorneos tbody');

          let filaEditando = null;

          // Cargar torneos existentes desde el backend al inicio
          window.addEventListener('load', () => {
            // Aquí podrías usar fetch para cargar torneos dinámicamente si lo deseas
          });

          form.addEventListener('submit', function (event) {
            event.preventDefault(); // No prevenimos el submit si el formulario se envía al backend
            this.submit(); // Enviar el formulario al backend
          });

          // Funcionalidad de edición local
          document.querySelectorAll('.btn-modificar').forEach(button => {
            button.addEventListener('click', () => {
              const fila = button.closest('tr');
              filaEditando = fila;
              document.getElementById('nombre').value = fila.cells[0].textContent;
              document.getElementById('fecha').value = fila.cells[1].textContent;
              document.getElementById('lugar').value = fila.cells[2].textContent;
              document.getElementById('nivel').value = fila.cells[3].textContent;
              document.getElementById('descripcion').value = fila.cells[4].textContent;
              document.getElementById('estado').value = fila.cells[5].textContent;
              form.querySelector('button[type="submit"]').textContent = 'Guardar Cambios';
            });
          });

          // Funcionalidad de eliminación local
          document.querySelectorAll('.btn-eliminar').forEach(button => {
            button.addEventListener('click', () => {
              const fila = button.closest('tr');
              if (confirm('¿Seguro quieres eliminar este torneo?')) {
                if (filaEditando === fila) {
                  form.reset();
                  filaEditando = null;
                  form.querySelector('button[type="submit"]').textContent = 'Registrar';
                }
                fila.remove();
              }
            });
          });

          // Restaurar botón al limpiar
          form.querySelector('button[type="reset"]').addEventListener('click', () => {
            if (filaEditando) {
              filaEditando = null;
              form.querySelector('button[type="submit"]').textContent = 'Registrar';
            }
          });
        </script>


    </section>

    <section id="seccion-estadisticas">
      <h3 class="text-xl font-bold mb-3">Estadísticas</h3>
      <!-- Gráficos, KPIs, etc -->
    </section>
  </main>
</div>


    <script src="{{ url_for('static', filename='js/loading.js') }}"></script>
    <script src="{{ url_for('static', filename='js/torneo-registro.js') }}"></script>
  </body>
</html>
